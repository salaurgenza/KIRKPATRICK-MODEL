<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modal Registrazione / Login</title>
  <style>
    :root{
      --bg:#f4f6fb; --card:#ffffff; --accent:#3b82f6; --muted:#6b7280;
    }
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); margin:0; padding:40px; color:#111}
    .container{max-width:980px;margin:0 auto;display:flex;gap:20px;align-items:center;justify-content:space-between}
    h1{font-size:20px;margin:0 0 6px}
    p.lead{margin:0;color:var(--muted)}

    /* Buttons */
    .btn{display:inline-block;padding:10px 14px;border-radius:8px;border:0;font-weight:600;cursor:pointer}
    .btn-primary{background:var(--accent);color:#fff}
    .btn-ghost{background:transparent;border:1px solid #e6e9f2;color:#111}

    /* Modal backdrop */
    .backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,0.45);z-index:50;padding:20px}
    .backdrop.show{display:flex}

    /* Modal card */
    .modal{width:100%;max-width:820px;background:var(--card);border-radius:12px;box-shadow:0 10px 30px rgba(2,6,23,0.12);overflow:hidden;display:grid;grid-template-columns:1fr 380px}
    @media (max-width:880px){.modal{grid-template-columns:1fr} .modal .aside{order:-1}}

    .main{padding:28px}
    .aside{background:linear-gradient(180deg,#f8fbff,#eef6ff);padding:28px;border-left:1px solid #eef3ff}
    .aside h2{margin:0 0 8px;color:var(--accent)}
    .aside p{margin:0;color:var(--muted);font-size:14px}

    form{display:grid;gap:10px}
    label{font-size:13px;color:#374151}
    input[type=text], input[type=email], input[type=password], input[type=number], input[type=date], select{
      width:100%;padding:10px;border-radius:8px;border:1px solid #e6e9f2;background:transparent;font-size:14px
    }
    .row{display:flex;gap:10px}
    .small{flex:1}

    .actions{display:flex;gap:10px;align-items:center;margin-top:6px}
    .switch{font-size:13px;color:var(--muted)}
    .muted{font-size:13px;color:var(--muted)}

    .close-btn{background:transparent;border:0;font-size:20px;color:var(--muted);cursor:pointer}

    .helper{font-size:13px;color:var(--muted)}

    /* simple validation styles */
    .error{border-color:#ef4444}
    .error-text{color:#ef4444;font-size:13px}

    /* small footer */
    .footer{margin-top:12px;font-size:13px;color:var(--muted)}

    /* tiny responsive */
    @media (max-width:420px){body{padding:18px}.modal{border-radius:10px}}
  </style>
</head>
<body>
  <div class="container">
    <div>
      <h1>Modal Registrazione / Login</h1>
      <p class="lead">Esempio minimal di modal con form di registrazione e login.</p>
    </div>
    <div>
      <button class="btn btn-ghost" id="openLogin">Login</button>
      <button class="btn btn-primary" id="openRegister">Registrati</button>
    </div>
  </div>

  <!-- Backdrop + Modal -->
  <div class="backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document" aria-labelledby="modalTitle">
      <!-- Main: form area -->
      <div class="main">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div>
            <h2 id="modalTitle">Accedi</h2>
            <p class="muted" id="modalSubtitle">Inserisci le credenziali per accedere al tuo account.</p>
          </div>
          <button class="close-btn" id="closeModal" aria-label="Chiudi">✕</button>
        </div>

        <!-- Login form -->
        <form id="loginForm" autocomplete="on">
          <div>
            <label for="loginEmail">Email</label>
            <input id="loginEmail" type="email" required placeholder="esempio@dominio.it">
          </div>
          <div>
            <label for="loginPassword">Password</label>
            <input id="loginPassword" type="password" required placeholder="Inserisci la password">
          </div>
          <div class="actions">
            <button class="btn btn-primary" type="submit">Entra</button>
            <button type="button" class="btn btn-ghost" id="toRegister">Vai a Registrazione</button>
            <span style="margin-left:auto" class="helper"><a href="index.html" id="forgot">Password dimenticata?</a></span>
          </div>
          <p class="error-text" id="loginError" style="display:none"></p>
        </form>

        <!-- Register form -->
        <form id="registerForm" style="display:none" autocomplete="on">
          <div class="row">
            <div class="small">
              <label for="nome">Nome</label>
              <input id="nome" type="text" placeholder="Mario">
            </div>
            <div class="small">
              <label for="cognome">Cognome</label>
              <input id="cognome" type="text" placeholder="Rossi">
            </div>
          </div>

          <div class="row">
            <div class="small">
              <label for="nascita">Data di nascita</label>
              <input id="nascita" type="date">
            </div>
            <div class="small">
              <label for="professione">Professione</label>
              <input id="professione" type="text" placeholder="Es. Infermiere">
            </div>
          </div>

          <div class="row">
            <div class="small">
              <label for="anni">Anni di servizio</label>
              <input id="anni" type="number" min="0" placeholder="0">
            </div>
            <div class="small">
              <label for="regEmail">Email</label>
              <input id="regEmail" type="email" placeholder="esempio@dominio.it">
            </div>
          </div>

          <div class="row">
            <div class="small">
              <label for="regPassword">Password</label>
              <input id="regPassword" type="password" placeholder="Min 8 caratteri">
            </div>
            <div class="small">
              <label for="regPassword2">Conferma password</label>
              <input id="regPassword2" type="password" placeholder="Ripeti la password">
            </div>
          </div>

          <div class="actions">
            <button class="btn btn-primary" type="submit">Crea account</button>
            <button type="button" class="btn btn-ghost" id="toLogin">Vai a Login</button>
          </div>
          <p class="error-text" id="regError" style="display:none"></p>
        </form>

        <div class="footer">Utilizzando questo servizio accetti i termini e la politica sulla privacy.</div>
      </div>

      <!-- Aside: info / social -->
      <div class="aside" aria-hidden="true">
        <h2 id="asideTitle">Benvenuto!</h2>
        <p>Registrati per salvare i tuoi progressi oppure effettua il login se hai già un account.</p>
        <hr style="border:none;border-top:1px solid #eef3ff;margin:12px 0">
        <p class="muted" style="font-size:13px">Veloce, sicuro e accessibile da dispositivi mobili.</p>
      </div>

    </div>
  </div>

  <script>
    // Elements
    const backdrop = document.getElementById('modalBackdrop');
    const openLogin = document.getElementById('openLogin');
    const openRegister = document.getElementById('openRegister');
    const closeModal = document.getElementById('closeModal');
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');
    const toRegister = document.getElementById('toRegister');
    const toLogin = document.getElementById('toLogin');
    const modalTitle = document.getElementById('modalTitle');
    const modalSubtitle = document.getElementById('modalSubtitle');

    function openModal(mode){
      backdrop.classList.add('show');
      backdrop.setAttribute('aria-hidden','false');
      if(mode === 'register'){
        loginForm.style.display = 'none';
        registerForm.style.display = 'grid';
        modalTitle.textContent = 'Registrazione';
        modalSubtitle.textContent = 'Compila i campi per creare il tuo account.';
      } else {
        registerForm.style.display = 'none';
        loginForm.style.display = 'grid';
        modalTitle.textContent = 'Accedi';
        modalSubtitle.textContent = 'Inserisci le credenziali per accedere al tuo account.';
      }
      // put focus on first input
      setTimeout(()=>{
        const first = backdrop.querySelector('input');
        if(first) first.focus();
      },50);
    }

    function close(){
      backdrop.classList.remove('show');
      backdrop.setAttribute('aria-hidden','true');
    }

    openLogin.addEventListener('click', ()=> openModal('login'));
    openRegister.addEventListener('click', ()=> openModal('register'));
    closeModal.addEventListener('click', close);
    backdrop.addEventListener('click', (e)=>{ if(e.target === backdrop) close(); });

    toRegister.addEventListener('click', ()=> openModal('register'));
    toLogin.addEventListener('click', ()=> openModal('login'));

    // Simple client-side demo behavior (NOT secure):
    loginForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const email = document.getElementById('loginEmail').value.trim();
      const pass = document.getElementById('loginPassword').value;
      const loginError = document.getElementById('loginError');
      loginError.style.display='none';

      // demo check using localStorage (for demo only)
      const stored = JSON.parse(localStorage.getItem('demoUser') || 'null');
      if(!stored || stored.email !== email || stored.password !== pass){
        loginError.textContent = 'Email o password non corretti (demo).';
        loginError.style.display = 'block';
        return;
      }

      alert('Login effettuato con successo. Benvenuto, '+(stored.nome||stored.email));
      close();
    });

    registerForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const nome = document.getElementById('nome').value.trim();
      const cognome = document.getElementById('cognome').value.trim();
      const nascita = document.getElementById('nascita').value;
      const professione = document.getElementById('professione').value.trim();
      const anni = document.getElementById('anni').value;
      const email = document.getElementById('regEmail').value.trim();
      const pass = document.getElementById('regPassword').value;
      const pass2 = document.getElementById('regPassword2').value;
      const regError = document.getElementById('regError');
      regError.style.display='none';

      if(!email || !pass){ regError.textContent='Email e password sono richieste.'; regError.style.display='block'; return }
      if(pass.length < 8){ regError.textContent='La password deve contenere almeno 8 caratteri.'; regError.style.display='block'; return }
      if(pass !== pass2){ regError.textContent='Le password non corrispondono.'; regError.style.display='block'; return }

      const user = {nome,cognome,nascita,professione,anni,email,password:pass};
      // WARNING: store in localStorage only for demo. Never store plaintext passwords in production.
      localStorage.setItem('demoUser', JSON.stringify(user));

      alert('Account creato (demo). Ora puoi effettuare il login.');
      openModal('login');
    });

    // keyboard ESC to close
    document.addEventListener('keydown',(e)=>{ if(e.key === 'Escape') close(); });
  </script>
</body>
</html>
